<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libfluidsynth: MIDI Input</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfluidsynth
   &#160;<span id="projectnumber">2.3.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__midi__input.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MIDI Input</div>  </div>
</div><!--header-->
<div class="contents">

<p>MIDI Input Subsystem.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__midi__driver"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi__driver.html">MIDI Driver</a></td></tr>
<tr class="memdesc:group__midi__driver"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for managing MIDI drivers. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__midi__events"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi__events.html">MIDI Events</a></td></tr>
<tr class="memdesc:group__midi__events"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions to create, modify, query and delete MIDI events. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__midi__player"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi__player.html">MIDI File Player</a></td></tr>
<tr class="memdesc:group__midi__player"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse standard MIDI files and emit MIDI events. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__midi__router"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi__router.html">MIDI Router</a></td></tr>
<tr class="memdesc:group__midi__router"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rule based transformation and filtering of MIDI events. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga42c3752e3adb54e0af802131c36a1129"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi__input.html#ga42c3752e3adb54e0af802131c36a1129">handle_midi_event_func_t</a>) (void *data, <a class="el" href="group__Types.html#ga61c72b76e3ee344637994c3071f74d94">fluid_midi_event_t</a> *event)</td></tr>
<tr class="memdesc:ga42c3752e3adb54e0af802131c36a1129"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic callback function for MIDI event handler.  <a href="group__midi__input.html#ga42c3752e3adb54e0af802131c36a1129">More...</a><br /></td></tr>
<tr class="separator:ga42c3752e3adb54e0af802131c36a1129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafca24d21bde3c5ae342c3954894217a8"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi__input.html#gafca24d21bde3c5ae342c3954894217a8">handle_midi_tick_func_t</a>) (void *data, int tick)</td></tr>
<tr class="memdesc:gafca24d21bde3c5ae342c3954894217a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic callback function fired once by MIDI tick change.  <a href="group__midi__input.html#gafca24d21bde3c5ae342c3954894217a8">More...</a><br /></td></tr>
<tr class="separator:gafca24d21bde3c5ae342c3954894217a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2327ed7bf1ff702b0ec4095b59d7d660"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi__input.html#ga2327ed7bf1ff702b0ec4095b59d7d660">fluid_synth_handle_midi_event</a> (void *data, <a class="el" href="group__Types.html#ga61c72b76e3ee344637994c3071f74d94">fluid_midi_event_t</a> *event)</td></tr>
<tr class="memdesc:ga2327ed7bf1ff702b0ec4095b59d7d660"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle MIDI event from MIDI router, used as a callback function.  <a href="group__midi__input.html#ga2327ed7bf1ff702b0ec4095b59d7d660">More...</a><br /></td></tr>
<tr class="separator:ga2327ed7bf1ff702b0ec4095b59d7d660"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>MIDI Input Subsystem. </p>
<p>There are multiple ways to send MIDI events to the synthesizer. They can come from MIDI files, from external MIDI sequencers or raw MIDI event sources, can be modified via MIDI routers and also generated manually.</p>
<p>The interface connecting all sources and sinks of MIDI events in libfluidsynth is <a class="el" href="group__midi__input.html#ga42c3752e3adb54e0af802131c36a1129">handle_midi_event_func_t</a>. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga42c3752e3adb54e0af802131c36a1129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga42c3752e3adb54e0af802131c36a1129">&#9670;&nbsp;</a></span>handle_midi_event_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* handle_midi_event_func_t) (void *data, <a class="el" href="group__Types.html#ga61c72b76e3ee344637994c3071f74d94">fluid_midi_event_t</a> *event)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic callback function for MIDI event handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>User defined data pointer </td></tr>
    <tr><td class="paramname">event</td><td>The MIDI event </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Should return <a class="el" href="group__misc.html#gae4efb1c3ce0d550c922504adfb0fb886" title="Value that indicates success, used by most libfluidsynth functions.">FLUID_OK</a> on success, <a class="el" href="group__misc.html#ga90e8bdbc5a507bbfa5c45bac85a63a61" title="Value that indicates failure, used by most libfluidsynth functions.">FLUID_FAILED</a> otherwise</dd></dl>
<p>This callback is used to pass MIDI events</p><ul>
<li>from <a class="el" href="group__midi__player.html">MIDI File Player</a>, <a class="el" href="group__midi__router.html">MIDI Router</a> or <a class="el" href="group__midi__driver.html">MIDI Driver</a></li>
<li>to <a class="el" href="group__midi__router.html">MIDI Router</a> via <a class="el" href="group__midi__router.html#ga6e80591df5910008c5bca21260b91c9c" title="Handle a MIDI event through a MIDI router instance.">fluid_midi_router_handle_midi_event()</a></li>
<li>or to <a class="el" href="group__synth.html">Synthesizer</a> via <a class="el" href="group__midi__input.html#ga2327ed7bf1ff702b0ec4095b59d7d660" title="Handle MIDI event from MIDI router, used as a callback function.">fluid_synth_handle_midi_event()</a>.</li>
</ul>
<p>Additionally, there is a translation layer to pass MIDI events to a <a class="el" href="group__sequencer.html">MIDI Sequencer</a> via <a class="el" href="group__sequencer.html#gaac5a0b2178a6d638d9c3d23b3735f4f2" title="Transforms an incoming MIDI event (from a MIDI driver or MIDI router) to a sequencer event and adds i...">fluid_sequencer_add_midi_event_to_buffer()</a>. </p>

</div>
</div>
<a id="gafca24d21bde3c5ae342c3954894217a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafca24d21bde3c5ae342c3954894217a8">&#9670;&nbsp;</a></span>handle_midi_tick_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* handle_midi_tick_func_t) (void *data, int tick)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic callback function fired once by MIDI tick change. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>User defined data pointer </td></tr>
    <tr><td class="paramname">tick</td><td>The current (zero-based) tick, which triggered the callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Should return <a class="el" href="group__misc.html#gae4efb1c3ce0d550c922504adfb0fb886" title="Value that indicates success, used by most libfluidsynth functions.">FLUID_OK</a> on success, <a class="el" href="group__misc.html#ga90e8bdbc5a507bbfa5c45bac85a63a61" title="Value that indicates failure, used by most libfluidsynth functions.">FLUID_FAILED</a> otherwise</dd></dl>
<p>This callback is fired at a constant rate depending on the current BPM and PPQ. e.g. for PPQ = 192 and BPM = 140 the callback is fired 192 * 140 times per minute (448/sec).</p>
<p>It can be used to sync external elements with the beat, or stop / loop the song on a given tick. Ticks being BPM-dependent, you can manipulate values such as bars or beats, without having to care about BPM.</p>
<p>For example, this callback loops the song whenever it reaches the 5th bar :</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> handle_tick(<span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> tick)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__Types.html#gaf6c718e19d8c9c6632cb8ffac6974d80">fluid_player_t</a> *player = (<a class="code" href="group__Types.html#gaf6c718e19d8c9c6632cb8ffac6974d80">fluid_player_t</a> *)data;</div>
<div class="line">    <span class="keywordtype">int</span> ppq = 192; <span class="comment">// From MIDI header</span></div>
<div class="line">    <span class="keywordtype">int</span> beatsPerBar = 4; <span class="comment">// From the song&#39;s time signature</span></div>
<div class="line">    <span class="keywordtype">int</span> loopBar = 5;</div>
<div class="line">    <span class="keywordtype">int</span> loopTick = (loopBar - 1) * ppq * beatsPerBar;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (tick == loopTick)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="group__midi__player.html#gaab5fe5b25ff513919b138d77e079c75a">fluid_player_seek</a>(player, 0);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="group__misc.html#gae4efb1c3ce0d550c922504adfb0fb886">FLUID_OK</a>;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Types_html_gaf6c718e19d8c9c6632cb8ffac6974d80"><div class="ttname"><a href="group__Types.html#gaf6c718e19d8c9c6632cb8ffac6974d80">fluid_player_t</a></div><div class="ttdeci">struct _fluid_player_t fluid_player_t</div><div class="ttdoc">MIDI player instance.</div><div class="ttdef"><b>Definition:</b> types.h:48</div></div>
<div class="ttc" id="agroup__midi__player_html_gaab5fe5b25ff513919b138d77e079c75a"><div class="ttname"><a href="group__midi__player.html#gaab5fe5b25ff513919b138d77e079c75a">fluid_player_seek</a></div><div class="ttdeci">int fluid_player_seek(fluid_player_t *player, int ticks)</div><div class="ttdoc">Seek in the currently playing file.</div><div class="ttdef"><b>Definition:</b> fluid_midi.c:2365</div></div>
<div class="ttc" id="agroup__misc_html_gae4efb1c3ce0d550c922504adfb0fb886"><div class="ttname"><a href="group__misc.html#gae4efb1c3ce0d550c922504adfb0fb886">FLUID_OK</a></div><div class="ttdeci">#define FLUID_OK</div><div class="ttdoc">Value that indicates success, used by most libfluidsynth functions.</div><div class="ttdef"><b>Definition:</b> misc.h:56</div></div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2327ed7bf1ff702b0ec4095b59d7d660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2327ed7bf1ff702b0ec4095b59d7d660">&#9670;&nbsp;</a></span>fluid_synth_handle_midi_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fluid_synth_handle_midi_event </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__Types.html#ga61c72b76e3ee344637994c3071f74d94">fluid_midi_event_t</a> *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle MIDI event from MIDI router, used as a callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>FluidSynth instance </td></tr>
    <tr><td class="paramname">event</td><td>MIDI event to handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__misc.html#gae4efb1c3ce0d550c922504adfb0fb886" title="Value that indicates success, used by most libfluidsynth functions.">FLUID_OK</a> on success, <a class="el" href="group__misc.html#ga90e8bdbc5a507bbfa5c45bac85a63a61" title="Value that indicates failure, used by most libfluidsynth functions.">FLUID_FAILED</a> otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
