<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libfluidsynth: Understanding the &quot;synthesis context&quot;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfluidsynth
   &#160;<span id="projectnumber">2.3.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('synth-context.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Understanding the "synthesis context" </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When reading through the functions exposed via our API, you will often read the note: "May or may not be called from synthesis context."</p>
<p>The reason for this is that some functions are intentionally not thread-safe. Or they require to be called from this context to behave correctly.</p>
<p>FluidSynth's rendering engine is implemented by using the "Dispatcher Thread
Pattern". This means that a certain thread <code>A</code> which calls one of FluidSynth's rendering functions, namely</p>
<ul>
<li><a class="el" href="group__audio__rendering.html#gaf41e26b153a095dbc4248e9df4f3ad46" title="Synthesize floating point audio to stereo audio channels (implements the default interface fluid_audi...">fluid_synth_process()</a></li>
<li><a class="el" href="group__audio__rendering.html#ga9528a3e544c0e26e80f316414d954040" title="Synthesize a block of floating point audio to separate audio buffers (multi-channel rendering).">fluid_synth_nwrite_float()</a></li>
<li><a class="el" href="group__audio__rendering.html#ga7db368da2d74a73d05feaff4a6bb1da4" title="Synthesize a block of floating point audio samples to audio buffers.">fluid_synth_write_float()</a></li>
<li><a class="el" href="group__audio__rendering.html#ga6b88528d1ea6322582314197488afab7" title="Synthesize a block of 16 bit audio samples to audio buffers.">fluid_synth_write_s16()</a></li>
</ul>
<p>automatically becomes the "synthesis thread". The terms "synthesis context" and "synthesis thread" are equivalent. A few locations in our API provide hooks that allow you to interfere this "synthesis context". At those locations you can register your own custom functions that will always be called by thread <code>A</code>. For this use-case, the following functions are of interest:</p>
<ul>
<li><a class="el" href="group__audio__driver.html#gad36d048b94952b23f7b3971bea39519f" title="Create a new audio driver.">new_fluid_audio_driver2()</a></li>
<li><a class="el" href="group__midi__player.html#ga615cfa9d81227d9253dddebc49d8edcb" title="Change the MIDI callback function.">fluid_player_set_playback_callback()</a></li>
<li><a class="el" href="group__sequencer.html#ga1a2462a3d4e0dbd963044973ca276e9c" title="Register a sequencer client.">fluid_sequencer_register_client()</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
</body>
</html>
